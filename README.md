
# Readme #

Here, you can find some resources related to the manuscript *Output maximization container loading problem with time availability constraints* by Pedro B. Castellucci, Franklina M. B. de Toledo and Alysson M. Costa.

Feel free to use it, partially or completely. But mind the terms of license.

Also, note that there is no warranty for the code and __we do not provide support for it__. We recommend you to use the resources here as guidelines for your development.

The code was developed using Julia 0.7 in Ubuntu 16.04.


# Description of the folders #

  * *src*: Folder with source codes.

  * *datasets*: Folder with the instances.

  * *results*: Folder with the results.

# Descriptions of the main source code files #

  *  *2017_CLP_CL_dynProg.jl*: Reads the cost of the states and runs the dynamic programming algorithm. Results are saved in the form CLTAC-dyn-x, x = {1, 2, 4}.

  *  *2017_CLP_CL_dynProgPreprocess.jl*: Solves the CLP for each instance in the dataset. It solves 10 versions of the problem. Considering boxes available up until t=1, then t=2, ..., t=10.

  *  *2018_CLP_CL_dynProgAllStates.jl*: Solves each possible state to be used in the dynamic programming algorithm.

  * *2018_CLP_CL_dynPackingKnapsack.jl*: Runs the simulation for the arrival of the boxes using the solution from the dynamic programming to decided whether to load or wait for more boxes.

  * *2018_CLP_CL_dynPackingBoxSetManipulator.jl*: Auxiliary function to manipulate the boxes set
    that arrive.
	
  * *check.jl*: Reads an instance file and a solution file and checks the solution. See details in
    the last section

# Description of the dataset #

The dataset consists of 97 instances: 47 instances based on _Ivancic et al. (1989)_ (thpack) and 50 based on _Bischoff and Ratcliff (1995)_ and _Davies and Bischoff (1999)_ (br) with the time generated randomly. Please, refer to the manuscript for details.

The first line of the file has three integers corresponding to the dimensions (length, width and height) of the container. The following lines represent the boxes, one per line. Each box is defined by four integer numbers: Its dimensions (length, width and height) follow by the time from which it becomes available.

# Description of the results #

The files named *CLP_preprocessFair.X.t* consists of the solution generated by the code *2017_CLP_CL_dynProgPreprocessFair.jl*. X is the number of the instance and t is related to the boxes available up until t.

The folder *dyn_prog_thpack* and *dyn_prog_br* with files *make.out_x and volume.out_x* summarize the results of the dynamic programming algorithm for different values of the cost of empty space, x = {1, 2, 4} and different probabilities of arrival {0.5, 0.6, ..., 1.0} for thpack and br instances, respectively.

The folder *CLPTAC_dynProg_AllStates* consists of files storing a solution of one possible state in the dynamic programming algorithm. For each state there is a file.

# Solution checker #

The source code *checker.jl* is intended to check the feasibility of a solution file. It assumes a
particular formatting of both the instance file and the solution file. 

## Instance file ##

The instances file must be
formatted as follows. The first line has the dimensions of the container (Lx, Ly, Lz) and the
following lines provide the dimensions of the boxes (x, y, z) followed by the time from which it is
available (t). For example:

Lx Ly Lz
x1 y1 z1 t1
x2 y2 z2 t2
.
.
.
xn yn zn tn

The id of the box is considered to be the line the box appears in the input file. The first box has
id 1, the second has id 2 and so on. 

## Solution file##

The solution file must have a line formatted as follows:

*Vehicle V. Dimensions (Lx, Ly, Lz)*

From this line, the checker will extract the dimensions of the vehicle (Lx, Ly, Lz). This line
should be followed by a list of boxes (id, position loaded, dimensions of the box and time loaded,
respectively). For example:

*Vehicle V. Dimensions (Lx, Ly, Lz)*
b1 px1 px1 px1 lx1 ly1 lz1 t1
b2 px2 px2 px2 lx2 ly2 lz2 t2
b3 px3 px3 px3 lx3 ly3 lz3 t3
.
.
.
bn pxn pxn pxn lxn lyn lzn tn

in which (pxi, pyi, pzi) represents the position of the corner of the box considering each axis
(length, width and height); (lxi, lyi, lzi) the length of the box along each axis; and ti the time
the box was loaded.

Warning! We do not check all the aspects of the solution. The checking is limited to the overlapping
of the boxes, making sure every loaded box is completely inside the container and is not loaded
before it is available. 
